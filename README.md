# CLI Chat

CLI-чат на Go, состоящий из клиента и сервера. Поддерживает отправку сообщений, логирование, валидацию имен пользователей, управление подключениями и REST API.

## Функционал

### Сервер:
- Логирует подключение и отключение пользователей.
- Логирует все сообщения чата (имя пользователя, время, текст).
- Валидация имени пользователя:
    - Длина: 3-10 символов.
    - Допустимые символы: латинские буквы, цифры, `-`, `_`, `.`.
    - В случае ошибки подключение отклоняется.
- Управление подключением:
    - `/connect [username]` — подключение.
    - `/exit` — отключение.
- Рассылает сообщения всем подключенным пользователям.
- При завершении работы сервера:
    - Отключает всех пользователей.
    - Записывает логи отключений в базу данных.
- REST API:
    - Получение истории сообщений (с пагинацией).
    - История подключения/отключения пользователей.

### Клиент:
- CLI-интерфейс для отправки сообщений.
- Подключение к серверу: `/connect [username]`.
- Отключение: `/exit`.

## Технические детали
- Использует WebSocket
- База данных: PostgreSQL
- Поддержка `docker-compose` для развертывания.

## Установка и запуск
### Через Docker
1. Склонируйте репозиторий:
   ```sh
   git clone https://github.com/m3fwto/chat-app.git
   cd chat-app
   ```
3. Запустите сервер и базу данных:
   ```sh
   docker-compose up --build
   ```

#### Клиент:
1. Запустите клиента:
   ```sh
   go run cmd/client/main.go
   ```

## Использование
### Подключение к серверу:
```sh
/connect Alice123
```
Если имя корректно, сервер ответит:
```
Connected as Alice123.
```
Если имя некорректно:
```
Error: Username must be 3-10 characters long and contain only letters, digits, '-', '_', or '.'.
```
### Отключение:
```sh
/exit
```
### Отправка сообщений:
```sh
Hello, everyone!
```

## REST API
### Получение истории сообщений
```sh
http://localhost:8081/messages?page=1&pageSize=10
```

### История подключения/отключения
```sh
http://localhost:8081/logs
```

